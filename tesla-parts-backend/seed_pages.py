"""
Seed script to add the required static pages to the database
Run: python seed_pages.py
"""
import sqlite3
import os

db_path = os.path.join(os.path.dirname(os.path.abspath(__file__)), "tesla_parts.db")

def seed_pages():
    conn = sqlite3.connect(db_path)
    cursor = conn.cursor()
    
    # Check existing pages
    cursor.execute("SELECT slug FROM page")
    existing_slugs = [row[0] for row in cursor.fetchall()]
    
    # Pages to seed
    pages = [
        (
            'about',
            'Про нас',
            '''Ласкаво просимо до Tesla Parts Shop!

Ми - ваш надійний постачальник оригінальних запчастин для електромобілів Tesla.

Наша компанія спеціалізується на постачанні високоякісних деталей та комплектуючих для всіх моделей Tesla: Model S, Model 3, Model X, Model Y та Cybertruck.

Чому обирають нас:
• Оригінальні запчастини з гарантією
• Швидка доставка по всій Україні
• Професійна консультація
• Конкурентні ціни
• Великий асортимент в наявності

Наша команда має багаторічний досвід у сфері обслуговування електромобілів та завжди готова надати професійну допомогу у виборі необхідних запчастин.''',
            True,
            'footer'
        ),
        (
            'delivery',
            'Доставка та оплата',
            '''Способи доставки:

• Нова Пошта - доставка 1-3 дні по всій Україні
• Укрпошта - доставка 3-7 днів
• Самовивіз зі складу в Києві (безкоштовно)
• Кур'єрська доставка по Києву - 150 грн

Вартість доставки:
Доставка Новою Поштою оплачується за тарифами перевізника при отриманні замовлення.

Способи оплати:

• Готівкою при отриманні
• Оплата на карту ПриватБанку
• Безготівковий розрахунок для юридичних осіб
• Оплата онлайн на сайті (незабаром)

Обробка замовлень:
Замовлення обробляються протягом 1-2 робочих днів. Наш менеджер зв'яжеться з вами для підтвердження наявності та уточнення деталей доставки.''',
            True,
            'footer'
        ),
        (
            'returns',
            'Повернення та обмін',
            '''Умови повернення товару:

Ви можете повернути або обміняти товар протягом 14 днів з моменту отримання згідно Закону про захист прав споживачів.

Вимоги до товару:
• Збережена оригінальна упаковка
• Відсутність слідів використання або пошкоджень
• Наявність всіх комплектуючих та документів
• Товарний вигляд не порушений

Як повернути товар:

1. Зв'яжіться з нами за телефоном або email
2. Вкажіть номер замовлення та причину повернення
3. Відправте товар Новою Поштою на нашу адресу
4. Після отримання та перевірки товару ми повернемо кошти

Повернення коштів:
Кошти повертаються протягом 5-7 робочих днів після отримання та перевірки товару тим же способом, яким була здійснена оплата.

Гарантія:
На всі товари діє гарантія виробника. У разі виявлення заводського браку - обмін або повернення коштів.''',
            True,
            'footer'
        ),
        (
            'faq',
            'Часті питання',
            '''Питання: Як оформити замовлення?
Відповідь: Додайте потрібні товари в кошик, натисніть "Оформити замовлення" та заповніть форму з контактними даними. Наш менеджер зв'яжеться з вами для підтвердження.

Питання: Скільки триває доставка?
Відповідь: Доставка Новою Поштою займає 1-3 дні, Укрпоштою - 3-7 днів з моменту відправлення.

Питання: Чи можна оплатити онлайн?
Відповідь: Так, ви можете оплатити на карту ПриватБанку або готівкою при отриманні.

Питання: Чи є гарантія на товари?
Відповідь: Так, на всі товари діє гарантія виробника від 6 місяців до 2 років залежно від типу запчастини.

Питання: Як дізнатися, чи підійде запчастина до моєї Tesla?
Відповідь: Зв'яжіться з нашими консультантами за телефоном або в месенджерах. Вкажіть модель та рік випуску вашого автомобіля.

Питання: Чи можна повернути товар?
Відповідь: Так, протягом 14 днів з моменту отримання за умови збереження товарного вигляду та упаковки.

Питання: Чи є у вас магазин/шоурум?
Відповідь: Так, у нас є склад в Києві, де ви можете оглянути товар та отримати консультацію. Попередній запис обов'язковий.

Питання: Чи надаєте знижки?
Відповідь: Для постійних клієнтів та при великих замовленнях діють спеціальні умови. Деталі уточнюйте у менеджера.''',
            True,
            'footer'
        ),
        (
            'contacts',
            'Контакти',
            '''Контактна інформація:

Телефон:
+38 (099) 123-45-67
+38 (097) 765-43-21

Email:
info@teslaparts.ua
support@teslaparts.ua

Адреса складу:
м. Київ, вул. Хрещатик, 1
(відвідування за попереднім записом)

Графік роботи:
Понеділок - П'ятниця: 9:00 - 18:00
Субота: 10:00 - 15:00
Неділя: вихідний

Месенджери:
Telegram: @teslaparts_ua
Viber: +38 (099) 123-45-67

Соціальні мережі:
Instagram: @teslaparts.ua
Facebook: facebook.com/teslaparts.ua

Як нас знайти:
Ми знаходимося в центрі Києва, недалеко від станції метро "Хрещатик".
Є зручне паркування для відвідувачів.

Зворотній зв'язок:
Ми завжди раді вашим запитанням та пропозиціям! Зв'яжіться з нами будь-яким зручним способом, і наші менеджери обов'язково вам допоможуть.''',
            True,
            'footer'
        ),
    ]
    
    added_count = 0
    for slug, title, content, is_published, location in pages:
        if slug not in existing_slugs:
            cursor.execute(
                "INSERT INTO page (slug, title, content, is_published, location) VALUES (?, ?, ?, ?, ?)",
                (slug, title, content, is_published, location)
            )
            print(f"✓ Added page: {slug}")
            added_count += 1
        else:
            print(f"- Page already exists: {slug}")
    
    conn.commit()
    conn.close()
    
    print(f"\nSeeding complete! Added {added_count} new pages.")
    print(f"Total pages in database: {len(existing_slugs) + added_count}")

if __name__ == "__main__":
    seed_pages()
